<!DOCTYPE html>
<head>

  <!-- meta -->
  <meta http-equiv="Content-type">
  <title>0</title>

  <!-- vendor -->
  <script src="vendor/jquery-1.11.0.js"></script>
  <script src="vendor/underscore.js"></script>
  <script src="vendor/keymaster.js"></script>
  <script src="vendor/deepCopy.js"></script>

  <!-- lib - css -->
  <link rel="stylesheet" href="lib/s.css" type="text/css" media="screen">

  <!-- lib - javascript: util -->
  <script src="lib/util/inherit.js"></script>
  <script src="lib/util/position.js"></script>
  <script src="lib/util/vector.js"></script>
  <script src="lib/util/impulse.js"></script>

  <!-- lib - javascript: moving_object -->
  <script src="lib/moving_object/movingObject.js"></script>
  <script src="lib/moving_object/asteroid.js"></script>
  <script src="lib/moving_object/bullet.js"></script>
  <script src="lib/moving_object/ship.js"></script>

  <!-- lib - javascript: game -->
  <script src="lib/window.js"></script>
  <script src="lib/game.js"></script>

  <!-- document ready -->
  <script>
		$(function(){

      startTimer(1000, 1.025)

      var asteroidCanvas = document.getElementById("asteroidCanvas")
      var $asteroidCanvas = $(asteroidCanvas)

      $asteroidCanvas.attr("width", getViewportWidth())
      $asteroidCanvas.attr("height", getViewportHeight())

			window.game = new Asteroids.Game({

				ctx: asteroidCanvas.getContext("2d"),
        width: $asteroidCanvas.attr("width"),
        height: $asteroidCanvas.attr("height")

			})

      window.game.start()

      $asteroidCanvas.click(function(event){
        var mousePosX = event.pageX / $asteroidCanvas.attr("width") * 100
        var mousePosY = event.pageY / $asteroidCanvas.attr("height") * 100

        var mousePos = new _2D.Position(mousePosX, mousePosY)

        game.fireBullet(mousePos)
      })

      $(window).resize(function(){
        $asteroidCanvas.attr("width", getViewportWidth())
        $asteroidCanvas.attr("height", getViewportHeight())
        game.width = $asteroidCanvas.attr("width")
        game.height = $asteroidCanvas.attr("height")
      })
    });

  </script>
</head>

<body>

  <noscript class="modal">
    Use JavaScript, you fool!
  </noscript>

  <canvas id="asteroidCanvas"></canvas>

</body>
